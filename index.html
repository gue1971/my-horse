<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Horse</title>

  <!-- PWA 関連（継続仕様） -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#111315">
  <link rel="apple-touch-icon" href="assets/icons/app/icon-192.png">

  <!-- CSS -->
  <link rel="stylesheet" href="css/index.css">
</head>
<body>
  <header class="site-header">
    <h1>
      <a href="https://www.umadb.com/member/" target="_blank" rel="noopener noreferrer">
        出資馬
      </a>
    </h1>
    <nav class="tabs">
      <button class="tab is-active" data-tab="tab1">1</button>
      <button class="tab" data-tab="tab2">2</button>
      <button class="tab" data-tab="tab3">3</button>
      <button class="tab" data-tab="tab4">引退馬</button>
      <button class="tab" data-tab="tab5">活躍馬</button>
    </nav>
  </header>

  <main>
    <div id="tab1" class="tab-panel grid"></div>
    <div id="tab2" class="tab-panel grid" hidden></div>
    <div id="tab3" class="tab-panel grid" hidden></div>
    <div id="tab4" class="tab-panel grid" hidden></div>
    <div id="tab5" class="tab-panel grid" hidden></div>
  </main>

  <!-- JS -->
  <script src="js/index.js" defer></script>

  <!-- Service Worker 登録（継続仕様） -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js', { scope: './' }).then(reg => {
          if (reg.waiting) {
            reg.waiting.postMessage({ type: 'SKIP_WAITING' });
          }
          reg.addEventListener('updatefound', () => {
            const newWorker = reg.installing;
            if (newWorker) {
              newWorker.addEventListener('statechange', () => {
                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                  window.location.reload();
                }
              });
            }
          });
        });
      });
    }
  </script>
</body>
</html>
